# 配置模块分析清单

## 1. Web配置模块 (mvc/)
**目标位置**: `shared/config/web/`

### 核心配置类
- `mvc/autoconfig/MvcAutoConfiguration.java` → `shared/config/web/WebAutoConfiguration.java`
- `mvc/autoconfig/MvcConfigurationProperties.java` → `shared/config/web/WebConfigurationProperties.java`
- `mvc/core/config/MvcWebMvcConfigurer.java` → `shared/config/web/WebMvcConfigurer.java`
- `mvc/core/config/CorsConfigurer.java` → `shared/config/web/CorsConfiguration.java`

### 拦截器
- `mvc/core/interceptor/TenantInterceptor.java` → `shared/config/web/interceptor/`
- `mvc/core/interceptor/TokenInterceptor.java` → `shared/config/web/interceptor/`

## 2. 数据库配置模块 (mybatis/)
**目标位置**: `shared/config/database/`

### 核心配置类
- `mybatis/autoconfig/TopinfoMybatisAutoConfiguration.java` → `shared/config/database/MybatisPlusConfiguration.java`
- `mybatis/autoconfig/TopinfoDynamicSqlSessionFactoryAutoConfiguration.java` → `shared/config/database/DynamicDataSourceConfiguration.java`
- `mybatis/bean/DataSourceConfig.java` → `shared/config/database/DataSourceConfiguration.java`

### 基础设施组件
- `mybatis/core/dynamic/*` → `shared/infrastructure/persistence/dynamic/`
- `mybatis/core/idgenerator/*` → `shared/infrastructure/persistence/generator/`
- `mybatis/util/PageUtils.java` → `shared/infrastructure/persistence/util/`

## 3. 缓存配置模块
**目标位置**: `shared/config/cache/`

### 分散的缓存配置
- `common/config/RedisConfig.java` → `shared/config/cache/RedisConfiguration.java`
- `core/config/CacheConfig.java` → `shared/config/cache/CacheConfiguration.java`
- `shared/common/config/CacheConfig.java` → 已在目标位置

## 4. 安全配置模块
**目标位置**: `shared/config/security/` (已部分存在)

### 分散的安全配置
- `common/config/SecurityConfig.java` → 评估是否需要迁移
- `security/config/DefaultShiroConfiguration.java` → 保留在security包
- `security/sso/config/*` → 保留在security包
- `shared/security/config/*` → 已在目标位置

## 5. 通用配置模块 (config/)
**目标位置**: `shared/config/`

### 通用配置类
- `config/ConfigChangeEvent.java` → `shared/config/events/`
- `config/ConfigChangeListener.java` → `shared/config/events/`
- `config/IpAccessConfigCache.java` → `shared/config/cache/`

## 6. 已迁移/符合目标的配置
**位置**: `shared/common/config/`

### 已正确放置的配置
- `shared/common/config/ApplicationConfig.java` ✅
- `shared/common/config/CacheConfig.java` ✅
- `shared/common/config/ConfigurationManager.java` ✅
- `shared/common/config/DatabaseConfig.java` ✅
- `shared/common/config/SecurityConfig.java` ✅

## 7. 需要保留在原位置的配置

### AutoConfiguration类 (Spring Boot自动配置)
- `*/autoconfig/*AutoConfiguration.java` - 保留原位置，因为包扫描需要
- `*/autoconfig/*AutoConfigurationProperties.java` - 保留原位置

### 业务特定配置
- `admin/core/config/RestTemplateConfig.java` - 保留在admin模块
- `security/core/config/SecurityWebMvcConfigurer.java` - 保留在security模块

## 迁移优先级

### 高优先级 (立即迁移)
1. Web配置模块 (mvc/) - 独立性强，依赖关系清晰
2. 通用配置模块 (config/) - 小规模，风险低

### 中优先级 (谨慎迁移)  
1. 数据库配置模块 (mybatis/) - 复杂依赖，需要仔细测试
2. 缓存配置合并 - 需要去重和整合

### 低优先级 (暂不迁移)
1. AutoConfiguration类 - Spring Boot扫描机制限制
2. 业务模块特定配置 - 保持模块边界